<h1>Файлы в хранилище</h1>

<div class="mb-4 d-flex">
  <div class="browse-path flex-grow-1">
    <ng-container
      *ngFor="let folderInfo of storeFacade.parentFoldersHierarchy$ | async; last as isLast; trackBy: trackFolderInfo">
      <button
        class="btn btn-outline-primary btn-sm mr-2 text-nowrap"
        [class.active]="isLast"
        (click)="handleFolderClick(folderInfo)"
        type="button"
      >
        {{folderInfo.name}}
      </button>
      <span class="mr-2">/</span>
    </ng-container>
  </div>
  <div class="browse-sort flex-shrink-0" ngbDropdown>
    <button
      class="btn btn-outline-primary btn-sm"
      id="dropdownSortOptions"
      ngbDropdownToggle
    >
      <ng-icon [name]="(storeFacade.sortIcon$ | ngrxPush) || ''"></ng-icon>
      {{storeFacade.sortLabel$ | ngrxPush}}
    </button>
    <div ngbDropdownMenu aria-labelledby="dropdownSortOptions">
      <button
        ngbDropdownItem
        *ngFor="let sortOption of availableSortOptions"
        (click)="storeFacade.handleChangeSort(sortOption)"
      >
        {{sortOption.label}}
      </button>
    </div>
  </div>
</div>

<div class="list">
  <div class="folder-item folder-item_parent mb-2" *ngIf="storeFacade.parentFolder$ | async as parentFolderInfo">
    <button
      class="btn btn-outline-primary btn-sm"
      (click)="handleFolderClick(parentFolderInfo)"
      type="button"
    >
      <ng-icon name="hero-arrow-sm-up"></ng-icon>
      {{parentFolderInfo.name}}
    </button>
  </div>
  <div class="folder-item mb-2" *ngFor="let oneFolder of storeFacade.folders$ | async; trackBy: trackFolderInfo">
    <button
      class="btn btn-outline-primary btn-sm"
      (click)="handleFolderClick(oneFolder)"
    >
      <ng-icon name="hero-folder"></ng-icon>
      {{oneFolder.name}}
    </button>
  </div>
  <ng-container
    *ngFor="let oneFileInfo of storeFacade.files$ | async; trackBy: trackFileInfo"
  >
    <mg-filestore-list-item
      class="list-item"
      [fileInfo]="oneFileInfo"
    ></mg-filestore-list-item>
  </ng-container>
</div>
