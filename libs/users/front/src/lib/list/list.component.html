<h1>Пользователи</h1>

<section class="mt-2 mb-2 actions-row">
  <div>
    <div class="btn-group" role="group" aria-label="Actions">
      <button type="button" class="btn btn-primary" (click)="handleAddUserButtonClick()">Добавить</button>
      <button type="button" class="btn btn-secondary">Right</button>
    </div>
  </div>
  <div>
    <ngb-pagination
      [collectionSize]="(total$ | async)!"
      [page]="(page$ | async)!"
      [pageSize]="(pageSize$ | async)!"
      [maxSize]="5"
      [rotate]="true"
      [boundaryLinks]="true"
      (pageChange)="handlePageChange($event)"
    ></ngb-pagination>
  </div>
</section>

<table class="table table-striped">
  <colgroup>
    <col style="width:40%">
    <col style="width:30%">
    <col style="width:30%">
  </colgroup>
  <thead>
  <tr>
    <th scope="col">id</th>
    <th scope="col">Имя</th>
    <th scope="col">Роль</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let user of users$ | async; trackBy: trackUsers">
    <td>
      <div class="d-flex align-items-baseline">
        <div ngbDropdown>
          <button
            class="btn btn-link align-baseline mr-2"
            ngbDropdownToggle
          >
            <ng-icon name="hero-menu"></ng-icon>
          </button>
          <div ngbDropdownMenu>
            <button
              ngbDropdownItem
              type="button"
              (click)="handleChangeRoleClick(user)"
            >
              <ng-icon name="hero-user-group"></ng-icon>
              Роль
            </button>
            <button
              ngbDropdownItem
              type="button"
              (click)="handleSetPasswordClick(user)"
            >
              <ng-icon name="hero-lock-closed"></ng-icon>
              Установить пароль
            </button>
            <button ngbDropdownItem type="button" class="text-danger" (click)="handleRemoveClick(user)">
              <ng-icon name="hero-user-remove"></ng-icon>
              Удалить
            </button>
          </div>
        </div>
        <span>{{user.uuid}}</span>
      </div>
    </td>
    <td>{{user.username}}</td>
    <td>{{user.role}}</td>
  </tr>
  </tbody>
</table>

