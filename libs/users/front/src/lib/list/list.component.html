<div class="container-xxl">

  <h1>Пользователи</h1>

  <section class="mt-2 mb-2 d-flex justify-content-between flex-wrap gap-2">
    <div>
      <div class="btn-group" role="group" aria-label="Actions">
        <button type="button" class="btn btn-primary" (click)="handleAddUserButtonClick()">
          <ng-icon name="heroUserPlusSolid"></ng-icon>
          Добавить
        </button>
      </div>
    </div>
    <div>
      <ngb-pagination
        [collectionSize]="total() || 0"
        [page]="page() || 0"
        [pageSize]="pageSize() || 0"
        [maxSize]="5"
        [rotate]="true"
        [boundaryLinks]="true"
        (pageChange)="handlePageChange($event)"
      ></ngb-pagination>
    </div>
  </section>

</div>

<div class="container-xxl gx-0 gx-md-4">

  <table class="table table-striped table-hover table-sm text-break">
    <colgroup>
      <col style="width:50%">
      <col style="width:25%">
      <col style="width:25%">
    </colgroup>
    <thead>
    <tr>
      <th scope="col">id</th>
      <th scope="col">Имя</th>
      <th scope="col">Роль</th>
    </tr>
    </thead>
    <tbody>
    @for (user of users(); track user.uuid) {
      <tr>
        <td>
          <div class="d-flex align-items-baseline">
            <div ngbDropdown>
              <button
                class="btn btn-link align-baseline mr-2"
                ngbDropdownToggle
              >
                <ng-icon name="heroBars3"></ng-icon>
              </button>
              <div ngbDropdownMenu>
                <button
                  ngbDropdownItem
                  type="button"
                  (click)="handleChangeRoleClick(user)"
                >
                  <ng-icon name="heroUsers"></ng-icon>
                  Роль
                </button>
                <button
                  ngbDropdownItem
                  type="button"
                  (click)="handleSetPasswordClick(user)"
                >
                  <ng-icon name="heroLockClosed"></ng-icon>
                  Установить пароль
                </button>
                <button ngbDropdownItem type="button" class="text-danger" (click)="handleRemoveClick(user)">
                  <ng-icon name="heroUserMinus"></ng-icon>
                  Удалить
                </button>
              </div>
            </div>
            <span>{{user.uuid}}</span>
          </div>
        </td>
        <td>{{user.username}}</td>
        <td>{{user.role}}</td>
      </tr>
    }
    </tbody>
  </table>

</div>
